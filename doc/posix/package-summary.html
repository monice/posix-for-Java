<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (version 1.7.0_71) on Mon Apr 10 10:02:10 CST 2017 -->
<meta http-equiv="Content-Type" content="text/html" charset="utf-8">
<title>posix</title>
<meta name="date" content="2017-04-10">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="posix";
    }
//-->
</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="跳过导航链接"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../posix/package-summary.html">程序包</a></li>
<li>类</li>
<li><a href="package-use.html">使用</a></li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../deprecated-list.html">已过时</a></li>
<li><a href="../index-files/index-1.html">索引</a></li>
<li><a href="../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>上一个程序包</li>
<li>下一个程序包</li>
</ul>
<ul class="navList">
<li><a href="../index.html?posix/package-summary.html" target="_top">框架</a></li>
<li><a href="package-summary.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="程序包" class="title">程序包&nbsp;posix</h1>
<div class="docSummary">
<div class="block">Posix for Java.</div>
</div>
<p>请参阅:&nbsp;<a href="#package_description">说明</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="packageSummary" border="0" cellpadding="3" cellspacing="0" summary="接口概要表, 列表接口和解释">
<caption><span>接口概要</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">接口</th>
<th class="colLast" scope="col">说明</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../posix/SignalListener.html" title="posix中的接口">SignalListener</a></td>
<td class="colLast">
<div class="block">An interface to listen for a posix signal event.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="packageSummary" border="0" cellpadding="3" cellspacing="0" summary="类概要表, 列表类和解释">
<caption><span>类概要</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">类</th>
<th class="colLast" scope="col">说明</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../posix/CPtr.html" title="posix中的类">CPtr</a></td>
<td class="colLast">
<div class="block">Read and write memory reachable through a C ptr.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../posix/CPtr.Struct.html" title="posix中的类">CPtr.Struct</a></td>
<td class="colLast">
<div class="block">Compute the offsets of a C struct one member at a time.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../posix/Errno.html" title="posix中的类">Errno</a></td>
<td class="colLast">
<div class="block">Report error codes returned by posix calls.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../posix/File.html" title="posix中的类">File</a></td>
<td class="colLast">
<div class="block">Extend java.io.File with posix features.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../posix/IPC.html" title="posix中的类">IPC</a></td>
<td class="colLast">
<div class="block">The base class of the SysV derived posix IPC methods.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../posix/IPC.Perm.html" title="posix中的类">IPC.Perm</a></td>
<td class="colLast">
<div class="block">Permission structure for SysV IPC resources.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../posix/LoadLibrary.html" title="posix中的类">LoadLibrary</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../posix/LockFile.html" title="posix中的类">LockFile</a></td>
<td class="colLast">
<div class="block">A simple unix style lock file.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../posix/Malloc.html" title="posix中的类">Malloc</a></td>
<td class="colLast">
<div class="block">Make C memory allocated with the <code>malloc</code> posix call
  available to Java.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../posix/MsgQ.html" title="posix中的类">MsgQ</a></td>
<td class="colLast">
<div class="block">Represent a posix message queue.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../posix/MsgQ.msqid_ds.html" title="posix中的类">MsgQ.msqid_ds</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../posix/Passwd.html" title="posix中的类">Passwd</a></td>
<td class="colLast">
<div class="block">POSIX style access to the unix passwd file.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../posix/SemSet.html" title="posix中的类">SemSet</a></td>
<td class="colLast">
<div class="block">Represent a posix semaphore set.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../posix/SemSet.semid_ds.html" title="posix中的类">SemSet.semid_ds</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../posix/SharedMem.html" title="posix中的类">SharedMem</a></td>
<td class="colLast">
<div class="block">A Posix shared memory segment.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../posix/SharedMem.shmid_ds.html" title="posix中的类">SharedMem.shmid_ds</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../posix/Signal.html" title="posix中的类">Signal</a></td>
<td class="colLast">
<div class="block">A posix signal.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../posix/SignalEvent.html" title="posix中的类">SignalEvent</a></td>
<td class="colLast">
<div class="block">An event thrown when a posix signal is trapped.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../posix/Stat.html" title="posix中的类">Stat</a></td>
<td class="colLast">
<div class="block">File status record for posix systems.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../posix/TestRcv.html" title="posix中的类">TestRcv</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../posix/TestSend.html" title="posix中的类">TestSend</a></td>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="packageSummary" border="0" cellpadding="3" cellspacing="0" summary="异常错误概要表, 列表异常错误和解释">
<caption><span>异常错误概要</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">异常错误</th>
<th class="colLast" scope="col">说明</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../posix/AlignmentException.html" title="posix中的类">AlignmentException</a></td>
<td class="colLast">
<div class="block">Report an access to C memory that violates platform dependent alignment
 restrictions.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../posix/IPCException.html" title="posix中的类">IPCException</a></td>
<td class="colLast">
<div class="block">Report unexpected errors with posix IPC calls.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package_description">
<!--   -->
</a>
<h2 title="程序包posix的说明">程序包posix的说明</h2>
<div class="block">Posix for Java.

<h3> Why Posix for Java? </h3>

A frequently asked question on Java newsgroups is "How do I use unix
signals (or messages or environment variables or ...) in Java?"  The answer
is, you can't with standard Java.  Equivalent features are in Java. For
example, Properties instead of environment variables or Sockets instead
of the various forms of unix IPC.  
<p>
However, sometimes it is necessary to interface with code written for
the unix environment - and that code can't be rewritten to use Sockets.
In those cases, it would be nice to have simple access to the Posix API
without everyone having to reinvent the wheel.
<p>
One solution is the <code>posix</code> package.  This package provides
access to the posix API from Java.  It uses a JNI library which should
be portable to other posix systems.  I started this package with the
intent of making it reusable by others.  However, it only has the classes
I have needed for my own projects at present :-).  I am making the source
and docs public so that others can reuse what I have so far and so that
I can collect any additions added by others.  
<p>
There is another posix API for Java used by the 
<a href="http://www.jython.org/">Jython project</a>:
<a href="http://sourceforge.net/projects/jnios">jnios</a>.
I will be looking at incorporating features from that package, or
getting rid of my own entirely.  I will not get rid of 'posix' if the
jnios package requires jython.

<h3> SysV IPC </h3>

There is fairly complete support for IPC.  The <a href="../posix/MsgQ.html" title="posix中的类"><code>MsgQ</code></a> class wraps
message queues, and <a href="../posix/SemSet.html" title="posix中的类"><code>SemSet</code></a> wraps semaphores.
<p>
The <a href="../posix/SharedMem.html" title="posix中的类"><code>SharedMem</code></a> class wraps an ipc shared memory segment.
Attaching a SharedMem returns a <a href="../posix/CPtr.html" title="posix中的类"><code>CPtr</code></a> which allows safe 
and portable access to C format structures in the shared memory.  (You
can only trash stuff in the share memory, not anywhere else.)  Similarly,
<a href="../posix/Malloc.html" title="posix中的类"><code>Malloc</code></a> safely allocates and accesses blocks of C memory
which can be passed to C apis and are not garbage collected.

<h3> The Passwd class </h3>

The <a href="../posix/Passwd.html" title="posix中的类"><code>Passwd</code></a> class provides read only access to files in the unix
<code>/etc/passwd</code> format.  It is a pure Java implementation.

<h3> The Stat function </h3>

The <a href="../posix/Stat.html" title="posix中的类"><code>Stat</code></a> class provides the most common fields from
<code>stat.h</code> and a <code>stat()</code> method to fill them in.  The 
<a href="../posix/File.html" title="posix中的类"><code>File</code></a> class extends java.io.File to provide
additional attributes such as lastAccessed().

<h3> The Posix Signal API for Java </h3>

The <a href="../posix/Signal.html" title="posix中的类"><code>Signal</code></a> class models posix signals,
converting them to Java Event notifications.  Common posix signals
are provided as preinitialized static Signal objects.  Because the JVM
uses signals internally, I do not export the API for trapping any
signal.  The ones I provide I believe are safe.

<h4>Signal Event implementation</h4>

A single Java Thread listens for signals by executing <code>sigwait()</code>
through JNI to wait on a semaphore.  The JNI code actually spawns another
non-Java thread to call sigwait, because that thread must be cancelled
in order to change the set of signals handled by Java.
The Java Signal Thread generates a <a href="../posix/SignalEvent.html" title="posix中的类"><code>SignalEvent</code></a> for each signal.
<p>
This implementation should be portable to any pthreads platform.
It uses mutexes and condition variables - which the JVM would also have
to use.  Currently, there is a small window during which a signal
will take the default action when calling Signal.setAction().  Set up
your SignalListeners at startup, and there should be no problem.

<h3> Further Information </h3>

The JNI source is in C++.  The C++ is used as a "better C".  In particular,
there are no static initializers, RTTI, or exceptions used since there is no
standard JVM support for C++.  
(Only these C++ features require special runtime support.)
We currently use gcc-3.4.6 on Centos4 with Sun JDK 1.5.0_16, and  gcc-2.7.2 on
AIX with the IBM JDK 1.1.6.4.</div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="跳过导航链接"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../posix/package-summary.html">程序包</a></li>
<li>类</li>
<li><a href="package-use.html">使用</a></li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../deprecated-list.html">已过时</a></li>
<li><a href="../index-files/index-1.html">索引</a></li>
<li><a href="../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>上一个程序包</li>
<li>下一个程序包</li>
</ul>
<ul class="navList">
<li><a href="../index.html?posix/package-summary.html" target="_top">框架</a></li>
<li><a href="package-summary.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
